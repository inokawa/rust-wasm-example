!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));const r=(...e)=>{const t=document.createElement("div");e.forEach(e=>{t.appendChild(e)}),document.body.appendChild(t)},a=(e,t)=>{const n=document.createElement("button");return n.appendChild(document.createTextNode(e)),n.addEventListener("click",t),n},o=(e,t,n,r)=>{const a=document.createElement("label");a.appendChild(document.createTextNode(e));const o=document.createElement("input");return o.setAttribute("type",t),o.addEventListener(n,r),a.appendChild(o),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return function e(t,n=self){n.addEventListener("message",(function a(o){if(!o||!o.data)return;const{id:s,type:c,path:l}=Object.assign({path:[]},o.data),d=(o.data.argumentList||[]).map(y);let p;try{const n=l.slice(0,-1).reduce((e,t)=>e[t],t),a=l.reduce((e,t)=>e[t],t);switch(c){case 0:p=a;break;case 1:n[l.slice(-1)[0]]=y(o.data.value),p=!0;break;case 2:p=a.apply(n,d);break;case 3:p=function(e){return Object.assign(e,{[r]:!0})}(new a(...d));break;case 4:{const{port1:n,port2:r}=new MessageChannel;e(t,r),p=function(e,t){return f.set(e,t),e}(n,[n])}break;case 5:p=void 0}}catch(e){p={value:e,[i]:0}}Promise.resolve(p).catch(e=>({value:e,[i]:0})).then(e=>{const[t,r]=m(e);n.postMessage(Object.assign(Object.assign({},t),{id:s}),r),5===c&&(n.removeEventListener("message",a),u(n))})})),n.start&&n.start()}(e,t),[n,[n]]},deserialize:e=>(e.start(),l(e))}],["throw",{canHandle:e=>s(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e,t){return function e(t,n=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(r,a){if(d(i),a===o)return()=>h(t,{type:5,path:n.map(e=>e.toString())}).then(()=>{u(t),i=!0});if("then"===a){if(0===n.length)return{then:()=>s};const e=h(t,{type:0,path:n.map(e=>e.toString())}).then(y);return e.then.bind(e)}return e(t,[...n,a])},set(e,r,a){d(i);const[o,s]=m(a);return h(t,{type:1,path:[...n,r].map(e=>e.toString()),value:o},s).then(y)},apply(r,o,s){d(i);const c=n[n.length-1];if(c===a)return h(t,{type:4}).then(y);if("bind"===c)return e(t,n.slice(0,-1));const[u,l]=p(s);return h(t,{type:2,path:n.map(e=>e.toString()),argumentList:u},l).then(y)},construct(e,r){d(i);const[a,o]=p(r);return h(t,{type:3,path:n.map(e=>e.toString()),argumentList:a},o).then(y)}});return s}(e,[],t)}function d(e){if(e)throw new Error("Proxy has been released and is not useable")}function p(e){const t=e.map(m);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const f=new WeakMap;function m(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:3,name:t,value:r},a]}return[{type:0,value:e},f.get(e)||[]]}function y(e){switch(e.type){case 3:return c.get(e.name).deserialize(e.value);case 0:return e.value}}function h(e,t,n){return new Promise(r=>{const a=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)})}},function(e,t,n){"use strict";n.r(t),function(e){var t=n(1),r=n(0);const a=t.a(new Worker(e,{name:"wasm",type:void 0}));(async()=>{r.a(r.b("Hello from C",async()=>{const e=await a.greet_c(99);alert(e)})),window.AudioContext=window.AudioContext||window.webkitAudioContext;const e=new AudioContext,t=e.sampleRate;let n;r.a(r.b("Audio start",async()=>{const r=await a.synth(440,1,t),o=e.createBuffer(2,1*t,t);o.getChannelData(0).set(r),o.getChannelData(1).set(r),n=e.createBufferSource(),n.buffer=o,n.connect(e.destination),n.start()}),r.b("Audio stop",()=>{n&&n.stop()})),r.a(r.c("Load image and modify","file","change",e=>{const t=e.target.files;if(!t)return;const n=t[0],o=new FileReader;o.onload=async()=>{const e=new Uint8Array(o.result),t=await a.process(e),n=t.width,i=t.height,s=document.createElement("canvas");s.setAttribute("width",n),s.setAttribute("height",i),r.a(s);const c=s.getContext("2d"),u=c.createImageData(n,i);u.data.set(t.pixels),c.putImageData(u,0,0)},o.readAsArrayBuffer(n)}));const o=document.createElement("span");r.a(r.c("Tokenize Japanese","text","input",async e=>{const t=await a.tokenize(e.target.value);o.innerHTML=t}),o),r.a(r.c("Archive file","file","change",e=>{const t=e.target.files;if(!t)return;const n=t[0],r=new FileReader;r.onload=async()=>{const e=new Uint8Array(r.result),t=await a.archive(e),o=new File([t],n.name+".gz",{type:"application/gzip"}),i=document.createElement("a");i.setAttribute("href",URL.createObjectURL(o)),i.setAttribute("download",o.name),i.click()},r.readAsArrayBuffer(n)})),await a.init()})()}.call(this,n(3))},function(e,t,n){e.exports=n.p+"wasm.worker.js"}]);